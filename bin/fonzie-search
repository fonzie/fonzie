#!/usr/bin/env node

var program   = require('commander');
var registry  = require('../lib/registry');
var utils     = require('../lib/utils');

// examples

program
  .usage('[query]')
  .parse(process.argv);

var query = program.args.join(' ');

registry.search(query, function(err, pkgs){
  if (err) utils.fatal(err.message);
  console.log();
  pkgs.forEach(function(pkg){
    console.log('  \033[36m%s\033[m', pkg.name);
    console.log('  desc: \033[90m%s\033[m', pkg.description);
    console.log('  url: \033[90m%s\033[m', pkg.url);
    if(pkg.author) console.log('  author: \033[90m%s\033[m', pkg.author);
    console.log();
  });
});